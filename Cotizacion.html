<!--
	Practica 4- Miriam Colino
	Pagina secundaria Cotizacion (API)
	Hago fetch de una API de bolsa de la compañia Repsol del pagina web www.alphavantage.com.
	Se muestra una tabla con información diaria, semanal y mensual, en cuanto se pulse el boton correspondiente.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>


    //DIARIA
    function genera_tabla1()
    {

        fetch('https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=REPYY&apikey=GLYG13Y49P0KIKR5')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                crearTabla(data,"Time Series (Daily)");
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });

    }


    //SEMANAL
     function genera_tabla2()
    {

        fetch('https://www.alphavantage.co/query?function=TIME_SERIES_WEEKLY&symbol=REPYY&apikey=GLYG13Y49P0KIKR5')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                crearTabla(data,"Weekly Time Series");
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });

    }


    //MENSUAL
     function genera_tabla3()
    {

        fetch('https://www.alphavantage.co/query?function=TIME_SERIES_MONTHLY&symbol=REPYY&apikey=GLYG13Y49P0KIKR5')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                crearTabla(data,"Monthly Time Series");
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });


    }
    function crearTabla(data,value)
    {
              var body = document.getElementById('tabla');
              var tabla   = document.createElement("table");
              var tblBody = document.createElement("tbody");

              var fila_1 = document.createElement("tr");

              var celda1 = document.createElement("td");
              var celda2 = document.createElement("td");
              var celda3= document.createElement("td");
              var celda4 = document.createElement("td");
              var celda5 = document.createElement("td");
              var celda6 = document.createElement("td");

               var textoCelda1 = document.createTextNode("Day");
               var textoCelda2 = document.createTextNode("Open");
               var textoCelda3 = document.createTextNode("High");
               var textoCelda4 = document.createTextNode("Low");
               var textoCelda5 = document.createTextNode("Close");
               var textoCelda6 = document.createTextNode("Volume");

               celda1.appendChild(textoCelda1);
               celda2.appendChild(textoCelda2);
               celda3.appendChild(textoCelda3);
               celda4.appendChild(textoCelda4);
               celda5.appendChild(textoCelda5);
               celda6.appendChild(textoCelda6);

               fila_1.appendChild(celda1);
               fila_1.appendChild(celda2);
               fila_1.appendChild(celda3);
               fila_1.appendChild(celda4);
               fila_1.appendChild(celda5);
               fila_1.appendChild(celda6);

               tblBody.appendChild(fila_1);


               var data_1= data[value];
               for(let key of Object.keys(data_1))
               {

                      var fila_siguiente = document.createElement("tr");

                      var celda7 = document.createElement("td");
                      var celda8 = document.createElement("td");
                      var celda9= document.createElement("td");
                      var celda10 = document.createElement("td");
                      var celda11 = document.createElement("td");
                      var celda12 = document.createElement("td");


                       var textoCelda7 = document.createTextNode(key);
                       var textoCelda8 = document.createTextNode(data_1[key]["1. open"]);
                       var textoCelda9 = document.createTextNode(data_1[key]["2. high"]);
                       var textoCelda10 = document.createTextNode(data_1[key]["3. low"]);
                       var textoCelda11 = document.createTextNode(data_1[key]["4. close"]);
                       var textoCelda12 = document.createTextNode(data_1[key]["5. volume"]);

                       celda7.appendChild(textoCelda7);
                       celda8.appendChild(textoCelda8);
                       celda9.appendChild(textoCelda9);
                       celda10.appendChild(textoCelda10);
                       celda11.appendChild(textoCelda11);
                       celda12.appendChild(textoCelda12);

                       fila_siguiente.appendChild(celda7);
                       fila_siguiente.appendChild(celda8);
                       fila_siguiente.appendChild(celda9);
                       fila_siguiente.appendChild(celda10);
                       fila_siguiente.appendChild(celda11);
                       fila_siguiente.appendChild(celda12);

                       tblBody.appendChild(fila_siguiente);

            }

              tabla.appendChild(tblBody);
              body.appendChild(tabla);
              tabla.setAttribute("border", "3");
              tabla.style.color = "red";

    }


     </script>

    <style>
        .derecha {
            margin: 1%;
            position: absolute;
            top=100%
            right: 50%;
            left: 90%;
        }

        footer {
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 20px;
        }


	</style>
</head>

<body>

    <div class="derecha">
        <a href="index.html" class="btn btn-info btn-lg">
            <span class="glyphicon glyphicon-home" align="left"></span> Home
        </a>
    </div>

    <div class="container-fluid p-5 text-white text-center" style="background-color:#fa9e56;">
        <div style="position:absolute">
            <img src="https://miriamcol.github.io/Practica4/Resources/logo-repsol-removebg-preview.png" width="40%" height="40%" align="left">
        </div>
        </br></br>

        <h1 style="color:white;">Cotización en Bolsa</h1>
    </div>



    <div class="container" style="text-align: center;">
        <button type="button" class="btn btn-primary btn-lg" onclick="genera_tabla1()" >DIARIA </button>
        <button type="button" class="btn btn-primary btn-lg"  onclick="genera_tabla2()" >SEMANAL</button>
        <button type="button" class="btn btn-primary btn-lg" onclick="genera_tabla3()">MENSUAL</button>
    </div>


    <!--
    <div style="background-image: url('https://miriamcol.github.io/Practica4/Resources/bolsa.jpg');opacity: 0.5; height:100%;">
        <div id="tabla" align="center">

        </div>
    </div>
    -->


    <div class="container">

        <!--
        <img src="https://miriamcol.github.io/Practica4/Resources/bolsa.jpg" style="opacity: 0.5"; alt="Snow" style="width:100%;">
        -->

        <div id="tabla" align="center"></div>
    </div>


    <!--
    <div style="background-image: url('https://miriamcol.github.io/Practica4/Resources/bolsa.jpg');opacity: 0.5; height:100%" >
            hjkfdslfhsdfhsdjkafhkjsdhfjkdsahjkfdsklfsd fsdajklflkdsfhnkjsejknsdjkfnsdjkbfjsdbfhbsd
    </div>
    -->
    <!--
    <img src="https://miriamcol.github.io/Practica4/Resources/bolsa.jpg" alt="Forest" width="100%" height="100%" style="opacity: 0.5";>
    -->


    <footer>
        <nav class="navbar-absolute-bottom text-center" style="background-color: #fa9e56">
            <p style="color:white;">
                <strong>¡Síguenos en Redes Sociales y no te pierdas nada!</strong> <br/><br/>
            </p>
            <a href="https://twitter.com/Repsol" target="_blank">
                <img width="40" height="40" src="https://miriamcol.github.io/Practica4/Resources/TwitterLogo.png" alt="No se pudo encontrar">
            </a>
            <a  href="https://www.instagram.com/repsol/?hl=es" target="_blank">
                <img width="40" height="40" src="https://miriamcol.github.io/Practica4/Resources/InstagramLogo.png" alt="No se pudo encontrar">
            </a>
            <a  href="http://www.facebook.com/guiarepsol" target="_blank">
                <img width="40" height="40" src="https://miriamcol.github.io/Practica4/Resources/FacebookLogo.png" alt="No se pudo encontrar">
            </a>
            <a  href="http://www.linkedin.com/company/repsol" target="_blank">
                <img width="40" height="40" src="https://miriamcol.github.io/Practica4/Resources/LinkedinLogo.png" alt="No se pudo encontrar">
            </a>
            <a href="https://www.youtube.com/repsol" target="_blank">
                <img width="40" height="40" src="https://miriamcol.github.io/Practica4/Resources/YoutubeLogo.png" alt="No se pudo encontrar">
            </a>
        </nav>
    </footer>



</body >

</html>